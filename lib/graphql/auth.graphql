mutation Login($username:String!,$password:String!) {
  login(username:$username, password:$password) {
    ... on UserSession {
      id
      username
      privilege
      token
    }
    ... on Result {
      ...ResultFrag
    }
  }
}

mutation Logout {
  logout {
    ...ResultFrag
  }
}

mutation RegisterUser($username:String!,$password:String!) {
  register(username:$username, password:$password) {
    ... on User {
      id
      username
    }
    ... on Result {
      ...ResultFrag
    }
  }
}

mutation MigrateUser($username:String!,$password:String!) {
  migrate(username:$username,password:$password) {
    ...on UserTemporary {
      id
      username
      approvalCode
    }
    ...on Result {
      ...ResultFrag
    }
  }
}

mutation ResetPassword($oldPass:String!,$newPass:String!) {
  resetPassword(oldPassword:$oldPass,newPassword:$newPass) {
    ... on User {
      id
      username
    }
    ... on Result {
      ...ResultFrag
    }
  }
}

query Session {
  session {
    ...on Result {
      ...ResultFrag
    }
    ...on UserSession {
      ...UserSess
    }
  }
}

fragment UserSess on UserSession {
  id
  username
  privilege
  token
  active {
    id
    name
    avatar {
      path
      type
    }
  }
}